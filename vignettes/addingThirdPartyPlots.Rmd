---
title: "Adding third party plots"
author: 
- name: Samuel Wieczorek
- name: Thomas Burger
package: omXplore
abstract: >
    The package omXplore is able to embed third party plots. This vignette aims to explain how to add an external plot to the main UI of `omXplore`.
date: "`r Sys.Date()`"
output:
    BiocStyle::html_document:
        toc_float: true
vignette: >
    %\VignetteIndexEntry{Adding third party plots}
    %%\VignetteKeywords{Softmware}
    %\VignetteEncoding{UTF-8}
    %\VignetteEngine{knitr::rmarkdown}
editor_options: 
  markdown: 
    wrap: 72
---

```{r style, echo = FALSE, results = 'asis'}
BiocStyle::markdown()
```

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
```

```{r env, message = FALSE, warning = FALSE, echo = FALSE}
library("omXplore")
```

## Introduction

One interesting feature about `omXplore` is the capacity to insert
custom plots into the collection of vignettes of the Shiny app
`view_dataset()`.

This is useful to complete the panel of built-in plots of `omXplore` ans
still use its main UI (See ?view_dataset()).

A new plot can be added if it is: (i) implemented in a R package and
(ii) loaded in the R global environment. This vignette describes these
two cases.

## Add an existing module

### From a R package

When one wants to add an external plot from a R package, it is by means
of the parameter 'addons' of the function `view_dataset()`.

This parameter is a list structured as follows: - the name of each slot
is the name of a R package in which a plot module is implemented - the
content of the slot is a vector of modules names

As an example, the code below is about to add three external plots: plot
functions "extFoo1" and "extFoo2" from the package "myPkgA" and a plot
function "extFoo1" from the package "myPkgB".

```{r eval = FALSE}
addons <- list(
  myPkgA = c("extFoo1", "extFoo2"),
  myPkgB = c("extFoo1")
  )
view_dataset(myData, addons)
```

As you may have noticed, it is possible to use identical function names
for plots from different packages.

With this procedure, it is not necessary to load the entire package in
order to user the plot module. `omXplore` loads only the necessary code.

### From R console

## Developing plot module

two points may be considered:

-   make a shiny app available in the global R environment

-   ensure that the name of the two functions `ui()` and `server()` of
    the app respect a predefined syntax. More specifically, the name of
    the shiny app is composed by the prefix 'mod_ds\_' (which stands for
    'descriptive statistics') and a user-defined name. As for each Shiny
    app, there must be two functions (one for the ui part and the second
    one for the server part.). Thus, in this example, the shiny app
    called `foo` must provide the functions `foo_ui()` and
    `foo_server()`.

In this case, a clickable button is added to the series of vignettes (at
the top of the right side of the UI). If an image has been correctly
configured, it is shown in this button.

The use of those external apps is devoted to its developer, the
interface of `omXplore` is only a shell that presents apps in a
user-friendly interface.

To add external app to `omXplore`, please use the global function
`view_dataset()` as follows. In the example below, one want to add the
app called `extFoo1` and `extFoo2` from the package `omXplore`. It is
only for the example, this app contains a simple plot just to
demonstrate how it works

If there are icons to display within omXplore, the png images must be
stored in the 'images' directory of the corresponding package.

## Session information

```{r}
sessionInfo()
```
